<head><title>Dados | SE</title></head><%=render 'header'%>
<p><b>Questão</b> | <%= link_to '/data/subject' do %> Disciplina <% end %></p>
<%= form_with html: { autocomplete: 'off' }, novalidate: true  do |form| %>
    <%= form.label :question, "Questão:"%> 
    <%= form.text_field :question, required: true, class: 'input-data', autofocus: true %> 
    <%= form.file_field :image, id: 'image'%>
    <%= image_tag('',id: 'hiddenImage')%>
    <% cookies[:reuse_image] == "1" ? @checked = "1" : @checked = "0" %>
    <%= form.hidden_field 'reuse_image', value: @checked %>
    <div id='imaging'></div><br>
    <div id='answers' style='margin-bottom: 2px'></div>
    <div id='choices'></div>
    <div id='questiontype'></div><br>
    <div id='tags'></div><br>
    <%= form.label :subject, "Para que disciplina?" %>
    <%= form.collection_select :subject, @subjects, :id, :title, selected: cookies[:subject] %>
    <div id='levels'></div>
    <div id='parameters'></div><br>
    <%= form.submit "Submeter Questão", class: 'submitBtn' %>
<% end %>
<br>
<div id='navigate_questions'></div>
<script>
<% if cookies[:level] && cookies[:types] && cookies[:choices] && cookies[:reuse_image] && cookies[:tags] && %>
<% cookies[:parameters] %>
const level = <%= cookies[:level].to_i %>;
const types = <%= cookies[:types] %>;
const choices = <%= cookies[:choices] %>;
const reuse_image = <%= cookies[:reuse_image] %>;
const tags = <%= raw cookies[:tags] %>;
const parameters = <%= cookies[:parameters] %>;
<% else %>
const level = 1;
const types = [0];
const choices = 0;
const reuse_image = "0";
const tags = [];
const parameters = [];
<% end %>
let questions = [];
let subjects = [];

<% Question.all.each do |question| %>
  questions.push({id: <% question.id %>, subject: <% question.subject_id%>, 
  question: "<% question.question.to_s %>", answers: <% question.answers.to_s %> })
<% end %>
</script>
</div>
